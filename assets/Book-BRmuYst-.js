import{r,j as e,L}from"./index-Dtkel95g.js";function a({icon:n,visible:t,swap:X,content:i,position:I}){const[s,o]=r.useState({button:!1,aside:!1}),l="display-table-of-contents "+(I==="right"?"bottom-right "+(s.button?"show-right":"hide-right"):"bottom-left "+(s.button?"show-left":"hide-left")),u="sidenav "+(I==="right"?"top-right "+(s.aside?"show-right":"hide-right"):"top-left "+(s.aside?"show-left":"hide-left"));return e.jsxs(e.Fragment,{children:[console.log("AsideMenu"),e.jsx("button",{className:l,onClick:()=>{o({...s,button:!s.button,aside:!s.aside})},children:e.jsx("img",{src:n,alt:"menu icon"})}),e.jsx("aside",{className:u,dangerouslySetInnerHTML:{__html:i}})]})}const V="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%235f6368'%3e%3cpath%20d='M320-160q-33%200-56.5-23.5T240-240v-120h120v-90q-35-2-66.5-15.5T236-506v-44h-46L60-680q36-46%2089-65t107-19q27%200%2052.5%204t51.5%2015v-55h480v520q0%2050-35%2085t-85%2035H320Zm120-200h240v80q0%2017%2011.5%2028.5T720-240q17%200%2028.5-11.5T760-280v-440H440v24l240%20240v56h-56L510-514l-8%208q-14%2014-29.5%2025T440-464v104ZM224-630h92v86q12%208%2025%2011t27%203q23%200%2041.5-7t36.5-25l8-8-56-56q-29-29-65-43.5T256-684q-20%200-38%203t-36%209l42%2042Zm376%20350H320v40h286q-3-9-4.5-19t-1.5-21Zm-280%2040v-40%2040Z'/%3e%3c/svg%3e",d="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%235f6368'%3e%3cpath%20d='M260-840q-45%200-72.5%2050T160-680q0%2063%2017.5%20111.5T210-496l110-22q13-32%2026.5-73t13.5-89q0-60-27.5-110T260-840Zm55%20520q19%200%2032-14t13-39q0-17-8-35t-16-32l-96%2020q0%2040%2017.5%2070t57.5%2030Zm385-320q-45%200-72.5%2050T600-480q0%2048%2013.5%2088.5T640-318l110%2022q15-24%2032.5-72T800-480q0-60-27.5-110T700-640Zm-55%20520q40%200%2057.5-30t17.5-70l-96-20q-8%2014-16%2032t-8%2035q0%2020%2012.5%2036.5T645-120ZM315-240q-77%200-117-57t-38-128l-18-27q-11-17-36.5-77T80-680q0-103%2051-171.5T260-920q85%200%20132.5%2075.5T440-680q0%2058-16%20107t-28%2079l8%2013q8%2014%2022%2044.5t14%2063.5q0%2057-35.5%2095T315-240ZM645-40q-54%200-89.5-38T520-173q0-33%2014-63.5t22-44.5l8-13q-12-30-28-79t-16-107q0-89%2047.5-164.5T700-720q78%200%20129%2068.5T880-480q0%2091-25.5%20150.5T818-253l-18%2028q1%2071-38.5%20128T645-40Z'/%3e%3c/svg%3e";function m(n,t){return`
      ${n.chapters.map((X,i)=>`
            <header>
              <h2 id='chapter-${X.ch}'> 
                ${!isNaN(X.ch)||h(X.ch)?`${X.ch}.`:""} 
                ${X.title} </h2>
            </header>
            <section style='text-align:justify;'> 
              ${(()=>{let I=X.content;I=I.replace(/^/gm,"<p>"),I=I.replace(/$/gm,"</p>");let s=I.matchAll(new RegExp(n.rgx,"gm"));if(s===null)return I;for(let o of s)I=I.replace(o[0],t.replaceAll("{number}",`${X.ch}.${o[1]}`));return I})()}
            </section>
          `).join("")}

`}function c(n,t){return`<section style='text-align:justify;'>
    ${n.chapters.map(X=>`${X.footnotes.map(i=>t.replaceAll("{number}",`${X.ch}.${i.id}`).replaceAll("{content}",i.note.replace(/$/gm,"<br>"))).join("")}`).join("")}
    </section>
    `}function f(n){return`
  <ul style='text-align:justify;'>
    ${n.chapters.map(t=>`<li> <a href='#chapter-${t.ch}'> ${!isNaN(t.ch)||h(t.ch)?`<span>${t.ch}.</span>`:""} ${t.title}</a></li>`).join("")}
  </ul>
  `}function h(n){return new Set(["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX","XXXI","XXXII","XXXIII","XXXIV","XXXV","XXXVI","XXXVII","XXXVIII","XXXIX","XL","XLI","XLII","XLIII","XLIV","XLV","XLVI","XLVII","XLVIII","XLIX","L","LI","LII","LIII","LIV","LV","LVI","LVII","LVIII","LIX","LX","LXI","LXII","LXIII","LXIV","LXV","LXVI","LXVII","LXVIII","LXIX","LXX","LXXI","LXXII","LXXIII","LXXIV","LXXV","LXXVI","LXXVII","LXXVIII","LXXIX","LXXX","LXXXI","LXXXII","LXXXIII","LXXXIV","LXXXV","LXXXVI","LXXXVII","LXXXVIII","LXXXIX","XC","XCI","XCII","XCIII","XCIV","XCV","XCVI","XCVII","XCVIII","XCIX","C"]).has(n)}function q({title:n}){const[t,X]=r.useState(),[i,I]=r.useState(!1),[s,o]=r.useState(!1);return r.useEffect(()=>(fetch(`https://bibilioteca-de-don-pelayo.onrender.com/${n}`).then(l=>l.json()).then(l=>X(l)),()=>{X(null)}),[n]),e.jsxs(e.Fragment,{children:[console.log("Book"),t?e.jsxs("main",{onClick:()=>{s&&o(!1),i&&I(!1)},children:[e.jsx("h1",{children:t.title}),e.jsx("article",{dangerouslySetInnerHTML:{__html:m(t,"<input type='button' value='{number}' popovertarget='footnote-{number}' id='{number}'>")}}),e.jsx("hr",{}),e.jsx("footer",{dangerouslySetInnerHTML:{__html:`${c(t,`<article popover id='footnote-{number}'> <a href="#{number}">{number}</a> {content} </article>`)}
         `}}),e.jsx("div",{className:"bottom"}),e.jsx(a,{icon:V,content:f(t),position:"left"}),e.jsx(a,{icon:d,content:c(t,"<article id='fn-{number}'> <span><a href='#{number}'><span>{number}</span></a></span> {content} </article>"),position:"right"})]}):e.jsx(L,{color:"red",taste:"dashed"})]})}export{q as default};

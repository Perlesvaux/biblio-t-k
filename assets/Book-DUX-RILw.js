import{r,j as t,L}from"./index-B_UMHCpV.js";function a({icon:n,visible:e,swap:I,content:i,position:X}){const[s,o]=r.useState({button:!1,aside:!1}),l="display-table-of-contents "+(X==="right"?"bottom-right "+(s.button?"show-right":"hide-right"):"bottom-left "+(s.button?"show-left":"hide-left")),u="sidenav "+(X==="right"?"top-right "+(s.aside?"show-right":"hide-right"):"top-left "+(s.aside?"show-left":"hide-left"));return t.jsxs(t.Fragment,{children:[console.log("AsideMenu"),t.jsx("button",{className:l,onClick:()=>{o({...s,button:!s.button,aside:!s.aside})},children:t.jsx("img",{src:n,alt:"menu icon"})}),t.jsx("aside",{className:u,dangerouslySetInnerHTML:{__html:i}})]})}const V="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%235f6368'%3e%3cpath%20d='M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z'/%3e%3c/svg%3e",m="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%235f6368'%3e%3cpath%20d='M260-840q-45%200-72.5%2050T160-680q0%2063%2017.5%20111.5T210-496l110-22q13-32%2026.5-73t13.5-89q0-60-27.5-110T260-840Zm55%20520q19%200%2032-14t13-39q0-17-8-35t-16-32l-96%2020q0%2040%2017.5%2070t57.5%2030Zm385-320q-45%200-72.5%2050T600-480q0%2048%2013.5%2088.5T640-318l110%2022q15-24%2032.5-72T800-480q0-60-27.5-110T700-640Zm-55%20520q40%200%2057.5-30t17.5-70l-96-20q-8%2014-16%2032t-8%2035q0%2020%2012.5%2036.5T645-120ZM315-240q-77%200-117-57t-38-128l-18-27q-11-17-36.5-77T80-680q0-103%2051-171.5T260-920q85%200%20132.5%2075.5T440-680q0%2058-16%20107t-28%2079l8%2013q8%2014%2022%2044.5t14%2063.5q0%2057-35.5%2095T315-240ZM645-40q-54%200-89.5-38T520-173q0-33%2014-63.5t22-44.5l8-13q-12-30-28-79t-16-107q0-89%2047.5-164.5T700-720q78%200%20129%2068.5T880-480q0%2091-25.5%20150.5T818-253l-18%2028q1%2071-38.5%20128T645-40Z'/%3e%3c/svg%3e";function d(n,e){return`
      ${n.chapters.map((I,i)=>`
            <header>
              <h2 id='chapter-${I.ch}'> 
                ${!isNaN(I.ch)||h(I.ch)?`${I.ch}.`:""} 
                ${I.title} </h2>
            </header>
            <section style='text-align:justify;'> 
              ${(()=>{let X=I.content;X=X.replace(/^/gm,"<p>"),X=X.replace(/$/gm,"</p>");let s=X.matchAll(new RegExp(n.rgx,"gm"));if(s===null)return X;for(let o of s)X=X.replace(o[0],e.replaceAll("{number}",`${I.ch}.${o[1]}`));return X})()}
            </section>
          `).join("")}

`}function c(n,e){return`<section style='text-align:justify;'>
    ${n.chapters.map(I=>`${I.footnotes.map(i=>e.replaceAll("{number}",`${I.ch}.${i.id}`).replaceAll("{content}",i.note.replace(/$/gm,"<br>"))).join("")}`).join("")}
    </section>
    `}function f(n){return`
  <ul style='text-align:justify;'>
    ${n.chapters.map(e=>`<li> <a href='#chapter-${e.ch}'> ${!isNaN(e.ch)||h(e.ch)?`<span>${e.ch}.</span>`:""} ${e.title}</a></li>`).join("")}
  </ul>
  `}function h(n){return new Set(["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX","XXXI","XXXII","XXXIII","XXXIV","XXXV","XXXVI","XXXVII","XXXVIII","XXXIX","XL","XLI","XLII","XLIII","XLIV","XLV","XLVI","XLVII","XLVIII","XLIX","L","LI","LII","LIII","LIV","LV","LVI","LVII","LVIII","LIX","LX","LXI","LXII","LXIII","LXIV","LXV","LXVI","LXVII","LXVIII","LXIX","LXX","LXXI","LXXII","LXXIII","LXXIV","LXXV","LXXVI","LXXVII","LXXVIII","LXXIX","LXXX","LXXXI","LXXXII","LXXXIII","LXXXIV","LXXXV","LXXXVI","LXXXVII","LXXXVIII","LXXXIX","XC","XCI","XCII","XCIII","XCIV","XCV","XCVI","XCVII","XCVIII","XCIX","C"]).has(n)}function p({title:n}){const[e,I]=r.useState(),[i,X]=r.useState(!1),[s,o]=r.useState(!1);return r.useEffect(()=>{fetch(`https://bibilioteca-de-don-pelayo.onrender.com/${n}`).then(l=>l.json()).then(l=>I(l))},[]),t.jsxs(t.Fragment,{children:[console.log("Book"),e?t.jsxs("main",{onClick:()=>{s&&o(!1),i&&X(!1)},children:[t.jsx("h1",{children:e.title}),t.jsx("article",{dangerouslySetInnerHTML:{__html:d(e,"<input type='button' value='{number}' popovertarget='footnote-{number}' id='{number}'>")}}),t.jsx("hr",{}),t.jsx("footer",{dangerouslySetInnerHTML:{__html:`${c(e,`<article popover id='footnote-{number}'> <a href="#{number}">{number}</a> {content} </article>`)}
         `}}),t.jsx("div",{className:"bottom"}),t.jsx(a,{icon:V,content:f(e),position:"left"}),t.jsx(a,{icon:m,content:c(e,"<article id='fn-{number}'> <span><a href='#{number}'><span>{number}</span></a></span> {content} </article>"),position:"right"})]}):t.jsx(L,{taste:"dashed"})]})}export{p as default};
